<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor's Notes</title>
    <style>
        :root {
            --vscode-font-family: var(--vscode-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
            --vscode-font-size: var(--vscode-font-size, 13px);
            --vscode-font-weight: var(--vscode-font-weight, 400);
            --vscode-editor-background: var(--vscode-editor-background, #ffffff);
            --vscode-editor-foreground: var(--vscode-editor-foreground, #000000);
            --vscode-panel-background: var(--vscode-panel-background, #f3f3f3);
            --vscode-panel-border: var(--vscode-panel-border, #e1e1e1);
            --vscode-input-background: var(--vscode-input-background, #ffffff);
            --vscode-input-foreground: var(--vscode-input-foreground, #000000);
            --vscode-input-border: var(--vscode-input-border, #cccccc);
            --vscode-button-background: var(--vscode-button-background, #0e639c);
            --vscode-button-foreground: var(--vscode-button-foreground, #ffffff);
            --vscode-button-hoverBackground: var(--vscode-button-hoverBackground, #1177bb);
            --vscode-button-secondaryBackground: var(--vscode-button-secondaryBackground, #5a5a5a);
            --vscode-button-secondaryForeground: var(--vscode-button-secondaryForeground, #ffffff);
            --vscode-button-secondaryHoverBackground: var(--vscode-button-secondaryHoverBackground, #6a6a6a);
            --vscode-focusBorder: var(--vscode-focusBorder, #007acc);
            --vscode-textLink-foreground: var(--vscode-textLink-foreground, #0066cc);
            --vscode-textPreformat-foreground: var(--vscode-textPreformat-foreground, #a31515);
            --vscode-textBlockQuote-background: var(--vscode-textBlockQuote-background, #f0f0f0);
            --vscode-textBlockQuote-border: var(--vscode-textBlockQuote-border, #cccccc);
            --vscode-textCodeBlock-background: var(--vscode-textCodeBlock-background, #f5f5f5);
            --vscode-widget-shadow: var(--vscode-widget-shadow, 0 2px 8px rgba(0, 0, 0, 0.1));
            --vscode-scrollbar-shadow: var(--vscode-scrollbar-shadow, #000000);
            --vscode-scrollbarSlider-background: var(--vscode-scrollbarSlider-background, #79797966);
            --vscode-scrollbarSlider-hoverBackground: var(--vscode-scrollbarSlider-hoverBackground, #646464b3);
            --vscode-scrollbarSlider-activeBackground: var(--vscode-scrollbarSlider-activeBackground, #bfbfbf66);
            --vscode-badge-background: var(--vscode-badge-background, #4d4d4d);
            --vscode-badge-foreground: var(--vscode-badge-foreground, #ffffff);
            --vscode-progressBar-background: var(--vscode-progressBar-background, #0e70c0);
            --vscode-tree-tableColumnsBorder: var(--vscode-tree-tableColumnsBorder, #cccccc80);
            --vscode-tree-tableOddRowsBackground: var(--vscode-tree-tableOddRowsBackground, #00000003);
            --vscode-sash-hoverBorder: var(--vscode-sash-hoverBorder, #007acc);
        }

        body {
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            font-weight: var(--vscode-font-weight);
            margin: 0;
            padding: 20px;
            background-color: var(--vscode-editor-background);
            color: var(--vscode-editor-foreground);
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--vscode-editor-foreground);
            margin-bottom: 30px;
            border-bottom: 2px solid var(--vscode-focusBorder);
            padding-bottom: 10px;
        }
        
        .section {
            margin-bottom: 30px;
            background: var(--vscode-panel-background);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--vscode-panel-border);
            box-shadow: var(--vscode-widget-shadow);
        }
        
        .section h3 {
            color: var(--vscode-editor-foreground);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .section p {
            color: var(--vscode-editor-foreground);
            margin-bottom: 15px;
            font-size: 14px;
            opacity: 0.8;
        }
        
        textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 1px solid var(--vscode-input-border);
            border-radius: 6px;
            background-color: var(--vscode-input-background);
            color: var(--vscode-input-foreground);
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--vscode-focusBorder);
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary {
            background-color: var(--vscode-button-background);
            color: var(--vscode-button-foreground);
        }
        
        .btn-primary:hover {
            background-color: var(--vscode-button-hoverBackground);
        }
        
        .btn-secondary {
            background-color: var(--vscode-button-secondaryBackground);
            color: var(--vscode-button-secondaryForeground);
        }
        
        .btn-secondary:hover {
            background-color: var(--vscode-button-secondaryHoverBackground);
        }
        
        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .status.success {
            background-color: var(--vscode-textBlockQuote-background);
            color: var(--vscode-textPreformat-foreground);
            border: 1px solid var(--vscode-textBlockQuote-border);
        }
        
        .status.error {
            background-color: var(--vscode-textBlockQuote-background);
            color: var(--vscode-textPreformat-foreground);
            border: 1px solid var(--vscode-textBlockQuote-border);
        }
        
        .help-text {
            font-size: 12px;
            color: var(--vscode-editor-foreground);
            margin-top: 5px;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Editor's Notes</h1>
        <p style="color: var(--vscode-editor-foreground); margin-bottom: 30px; opacity: 0.8;">
            Add your guidance and preferences to influence research and script generation. 
            These notes will be incorporated into the AI analysis and prompt generation.
        </p>
        
        <div class="section">
            <h3>üîç Research Guidance</h3>
            <p>Direct the research focus and areas of interest for the story analysis.</p>
            <textarea id="researchGuidance" placeholder="e.g., Focus on 1st century Mediterranean culture, early Christian symbolism, and historical context of Patmos Island..."></textarea>
            <div class="help-text">This will guide the AI research to focus on specific areas of interest.</div>
        </div>
        
        <div class="section">
            <h3>üé¨ Script Guidance</h3>
            <p>Provide direction for script generation and narrative flow.</p>
            <textarea id="scriptGuidance" placeholder="e.g., Emphasize the spiritual transformation journey, focus on the protagonist's emotional arc, maintain biblical epic tone..."></textarea>
            <div class="help-text">This influences how the AI generates video prompts and narrative structure.</div>
        </div>
        
        <div class="section">
            <h3>üé® Visual Style</h3>
            <p>Specify your preferred visual style and cinematographic approach.</p>
            <textarea id="visualStyle" placeholder="e.g., Cinematic, golden hour lighting, biblical epic style, high contrast, warm color palette..."></textarea>
            <div class="help-text">This will be applied consistently across all video segments.</div>
        </div>
        
        <div class="section">
            <h3>üë§ Character Notes</h3>
            <p>Provide specific guidance about character appearance and behavior.</p>
            <textarea id="characterNotes" placeholder="e.g., Protagonist should appear weathered but dignified, with piercing eyes that convey spiritual depth..."></textarea>
            <div class="help-text">This influences character descriptions and visual consistency.</div>
        </div>
        
        <div class="section">
            <h3>üìñ Narrative Focus</h3>
            <p>Define the themes and narrative direction for the story.</p>
            <textarea id="narrativeFocus" placeholder="e.g., Redemption and divine revelation themes, spiritual awakening, transformation from exile to enlightenment..."></textarea>
            <div class="help-text">This guides the overall narrative and thematic approach.</div>
        </div>
        
        <div class="section">
            <h3>‚öôÔ∏è Technical Notes</h3>
            <p>Specify technical requirements and constraints.</p>
            <textarea id="technicalNotes" placeholder="e.g., Maintain 16:9 aspect ratio, high contrast lighting, avoid fast cuts, prefer steady camera work..."></textarea>
            <div class="help-text">Technical requirements that will be incorporated into video generation.</div>
        </div>
        
        <div class="button-group">
            <button class="btn-primary" onclick="saveNotes()">üíæ Save Notes</button>
            <button class="btn-secondary" onclick="clearNotes()">üóëÔ∏è Clear All</button>
            <button class="btn-secondary" onclick="loadNotes()">üîÑ Refresh</button>
        </div>
        
        <div id="status"></div>
    </div>

    <script>
        const vscode = acquireVsCodeApi();
        
        // Load existing notes when page loads
        window.addEventListener('load', () => {
            loadNotes();
        });
        
        function loadNotes() {
            vscode.postMessage({
                command: 'loadNotes'
            });
        }
        
        function saveNotes() {
            const notes = {
                researchGuidance: document.getElementById('researchGuidance').value.trim(),
                scriptGuidance: document.getElementById('scriptGuidance').value.trim(),
                visualStyle: document.getElementById('visualStyle').value.trim(),
                characterNotes: document.getElementById('characterNotes').value.trim(),
                narrativeFocus: document.getElementById('narrativeFocus').value.trim(),
                technicalNotes: document.getElementById('technicalNotes').value.trim(),
                modifiedAt: new Date().toISOString()
            };
            
            vscode.postMessage({
                command: 'saveNotes',
                notes: notes
            });
        }
        
        function clearNotes() {
            if (confirm('Are you sure you want to clear all editor\'s notes?')) {
                document.getElementById('researchGuidance').value = '';
                document.getElementById('scriptGuidance').value = '';
                document.getElementById('visualStyle').value = '';
                document.getElementById('characterNotes').value = '';
                document.getElementById('narrativeFocus').value = '';
                document.getElementById('technicalNotes').value = '';
                
                showStatus('All notes cleared', 'success');
            }
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            
            setTimeout(() => {
                statusDiv.textContent = '';
                statusDiv.className = '';
            }, 3000);
        }
        
        // Handle messages from extension
        window.addEventListener('message', event => {
            const message = event.data;
            
            switch (message.command) {
                case 'loadNotes':
                    if (message.notes) {
                        document.getElementById('researchGuidance').value = message.notes.researchGuidance || '';
                        document.getElementById('scriptGuidance').value = message.notes.scriptGuidance || '';
                        document.getElementById('visualStyle').value = message.notes.visualStyle || '';
                        document.getElementById('characterNotes').value = message.notes.characterNotes || '';
                        document.getElementById('narrativeFocus').value = message.notes.narrativeFocus || '';
                        document.getElementById('technicalNotes').value = message.notes.technicalNotes || '';
                    }
                    break;
                    
                case 'saveResult':
                    if (message.success) {
                        showStatus('Editor\'s notes saved successfully!', 'success');
                    } else {
                        showStatus('Failed to save notes: ' + message.error, 'error');
                    }
                    break;
            }
        });
    </script>
</body>
</html>
